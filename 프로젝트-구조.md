# VM ì˜¤í† ìŠ¤ì¼€ì¼ë§ í”„ë¡œì íŠ¸ êµ¬ì¡°

**ì‘ì„±ì¼**: 2025-11-20  
**ë²„ì „**: 1.0

---

## ğŸ“ í´ë” êµ¬ì¡°

```
VM-Autoscaling/
â”œâ”€â”€ README.md                    # í”„ë¡œì íŠ¸ ê°œìš” ë° ê¸°íšì„œ
â”œâ”€â”€ êµ¬í˜„-ê°€ì´ë“œ.md                # ìƒì„¸ êµ¬í˜„ ê°€ì´ë“œ
â”œâ”€â”€ í”„ë¡œì íŠ¸-êµ¬ì¡°.md              # ì´ ë¬¸ì„œ
â”‚
â”œâ”€â”€ backend/                     # ë°±ì—”ë“œ ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js            # ë©”ì¸ HTTP ì„œë²„
â”‚   â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ templateService.js      # í…œí”Œë¦¿ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ autoscalingService.js   # ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ prometheusService.js    # Prometheus ì—°ë™ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ jenkinsService.js       # Jenkins ì—°ë™ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ f5Service.js           # F5 ì—°ë™ ì„œë¹„ìŠ¤ (ê¸°ì¡´ ì½”ë“œ ì¬ì‚¬ìš©)
â”‚   â”‚   â”œâ”€â”€ controllers/         # API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ templateController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ autoscalingController.js
â”‚   â”‚   â”‚   â””â”€â”€ monitoringController.js
â”‚   â”‚   â”œâ”€â”€ routes/              # API ë¼ìš°íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ templates.js
â”‚   â”‚   â”‚   â”œâ”€â”€ autoscaling.js
â”‚   â”‚   â”‚   â””â”€â”€ monitoring.js
â”‚   â”‚   â””â”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚       â”œâ”€â”€ ipPoolManager.js # IP Pool ê´€ë¦¬
â”‚   â”‚       â””â”€â”€ logger.js         # ë¡œê¹… ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ data/                    # ë°ì´í„° ì €ì¥ì†Œ (JSON íŒŒì¼)
â”‚   â”‚   â”œâ”€â”€ templates.json       # í…œí”Œë¦¿ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ autoscaling-configs.json  # ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì •
â”‚   â”‚   â””â”€â”€ events.json          # ìŠ¤ì¼€ì¼ì•„ì›ƒ ì´ë²¤íŠ¸ ë¡œê·¸
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example             # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”‚
â”œâ”€â”€ frontend/                    # í”„ë¡ íŠ¸ì—”ë“œ ì›¹ UI
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx              # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ components/          # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ TemplateList.jsx        # í…œí”Œë¦¿ ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ TemplateForm.jsx        # í…œí”Œë¦¿ ìƒì„±/ìˆ˜ì • í¼
â”‚   â”‚   â”‚   â”œâ”€â”€ AutoscalingConfigList.jsx  # ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ AutoscalingConfigForm.jsx  # ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • í¼
â”‚   â”‚   â”‚   â”œâ”€â”€ MonitoringDashboard.jsx    # ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”‚   â””â”€â”€ ScaleOutEventList.jsx      # ìŠ¤ì¼€ì¼ì•„ì›ƒ ì´ë²¤íŠ¸ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ pages/               # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ TemplatesPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AutoscalingPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MonitoringPage.jsx
â”‚   â”‚   â”‚   â””â”€â”€ EventsPage.jsx
â”‚   â”‚   â”œâ”€â”€ hooks/                # React í›…
â”‚   â”‚   â”‚   â”œâ”€â”€ useTemplates.js
â”‚   â”‚   â”‚   â”œâ”€â”€ useAutoscaling.js
â”‚   â”‚   â”‚   â””â”€â”€ useMonitoring.js
â”‚   â”‚   â””â”€â”€ services/            # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â”œâ”€â”€ api.js           # API í˜¸ì¶œ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ templateApi.js
â”‚   â”‚       â”œâ”€â”€ autoscalingApi.js
â”‚   â”‚       â””â”€â”€ monitoringApi.js
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â”œâ”€â”€ scripts/                     # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ get-available-ip.py      # ì‚¬ìš© ê°€ëŠ¥í•œ IP ì¡°íšŒ
â”‚   â”œâ”€â”€ add-f5-pool-member.py    # F5 Pool Member ì¶”ê°€
â”‚   â”œâ”€â”€ create-vm-from-template.sh # í…œí”Œë¦¿ì—ì„œ VM ìƒì„±
â”‚   â””â”€â”€ health-check.sh          # Health Check ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ jenkins/                     # Jenkins íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ Jenkinsfile.autoscale    # ìë™ ìŠ¤ì¼€ì¼ì•„ì›ƒ íŒŒì´í”„ë¼ì¸
â”‚   â””â”€â”€ pipeline-config.groovy  # íŒŒì´í”„ë¼ì¸ ì„¤ì •
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â”œâ”€â”€ api-reference.md         # API ì°¸ì¡° ë¬¸ì„œ
â”‚   â”œâ”€â”€ user-guide.md            # ì‚¬ìš©ì ê°€ì´ë“œ
â”‚   â”œâ”€â”€ troubleshooting.md      # íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ
â”‚   â””â”€â”€ deployment-guide.md     # ë°°í¬ ê°€ì´ë“œ
â”‚
â””â”€â”€ data/                        # ë°ì´í„° ë””ë ‰í† ë¦¬ (ì‹¤ì œ ë°ì´í„° ì €ì¥)
    â”œâ”€â”€ templates.json
    â”œâ”€â”€ autoscaling-configs.json
    â””â”€â”€ events.json
```

---

## ğŸ“¦ ì£¼ìš” íŒŒì¼ ì„¤ëª…

### Backend

#### `server.js`
- Express ê¸°ë°˜ HTTP ì„œë²„
- API ë¼ìš°íŠ¸ ë“±ë¡
- ë¯¸ë“¤ì›¨ì–´ ì„¤ì • (CORS, Body Parser ë“±)

#### `services/templateService.js`
- í…œí”Œë¦¿ ìƒì„±, ì¡°íšŒ, ì‚­ì œ ë¡œì§
- vCenter API ì—°ë™ (govc ì‚¬ìš©)

#### `services/autoscalingService.js`
- ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • CRUD
- ì„¤ì • í™œì„±í™”/ë¹„í™œì„±í™”

#### `services/prometheusService.js`
- Prometheus Alert Rule ìƒì„±
- ë©”íŠ¸ë¦­ ì¡°íšŒ

#### `services/jenkinsService.js`
- Jenkins íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- Webhook ìˆ˜ì‹  ë° ì²˜ë¦¬

#### `utils/ipPoolManager.js`
- IP Pool ê´€ë¦¬
- ì‚¬ìš© ê°€ëŠ¥í•œ IP ì¡°íšŒ
- IP í• ë‹¹/í•´ì œ

### Frontend

#### `components/TemplateList.jsx`
- í…œí”Œë¦¿ ëª©ë¡ í‘œì‹œ
- í…œí”Œë¦¿ ìƒì„±/ì‚­ì œ ë²„íŠ¼

#### `components/AutoscalingConfigForm.jsx`
- ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • ì…ë ¥ í¼
- ëª¨ë‹ˆí„°ë§, ìŠ¤ì¼€ì¼ë§, F5, ë„¤íŠ¸ì›Œí¬ ì„¤ì •

#### `components/MonitoringDashboard.jsx`
- ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ê·¸ë˜í”„
- CPU, Memory, Response Time í‘œì‹œ

### Scripts

#### `get-available-ip.py`
- IP Poolì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ IP ì°¾ê¸°
- Ping í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

#### `add-f5-pool-member.py`
- F5 Poolì— Member ì¶”ê°€
- F5 iControl REST API ì‚¬ìš©

### Jenkins

#### `Jenkinsfile.autoscale`
- ìë™ ìŠ¤ì¼€ì¼ì•„ì›ƒ íŒŒì´í”„ë¼ì¸ ì •ì˜
- VM ìƒì„± â†’ IP í• ë‹¹ â†’ Ping í…ŒìŠ¤íŠ¸ â†’ F5 ì¶”ê°€

---

## ğŸ”„ ë°ì´í„° íë¦„

### 1. í…œí”Œë¦¿ ìƒì„±
```
ì‚¬ìš©ì ì…ë ¥ â†’ Frontend â†’ Backend API â†’ vCenter API â†’ Template ìƒì„± â†’ ë©”íƒ€ë°ì´í„° ì €ì¥
```

### 2. ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì •
```
ì‚¬ìš©ì ì…ë ¥ â†’ Frontend â†’ Backend API â†’ ì„¤ì • ì €ì¥ â†’ Prometheus Alert Rule ìƒì„±
```

### 3. ìë™ ìŠ¤ì¼€ì¼ì•„ì›ƒ
```
Prometheus Alert â†’ Alertmanager â†’ Jenkins Webhook â†’ Jenkins Pipeline â†’ 
VM ìƒì„± â†’ IP í• ë‹¹ â†’ Ping í…ŒìŠ¤íŠ¸ â†’ F5 Pool ì¶”ê°€ â†’ ì´ë²¤íŠ¸ ë¡œê·¸ ì €ì¥
```

---

## ğŸ› ï¸ ê°œë°œ í™˜ê²½ ì„¤ì •

### Backend

```bash
cd backend
npm init -y
npm install express axios
npm install --save-dev nodemon
```

### Frontend

```bash
cd frontend
npm create vite@latest . -- --template react
npm install axios recharts
```

### Scripts

```bash
chmod +x scripts/*.py scripts/*.sh
pip3 install requests
```

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **Backend ê¸°ë³¸ êµ¬ì¡° ìƒì„±**
   - Express ì„œë²„ ì„¤ì •
   - ê¸°ë³¸ ë¼ìš°íŠ¸ êµ¬ì„±

2. **í…œí”Œë¦¿ ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„**
   - í…œí”Œë¦¿ ìƒì„± API
   - í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ API

3. **ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • ê¸°ëŠ¥ êµ¬í˜„**
   - ì„¤ì • CRUD API
   - Prometheus Alert Rule ìƒì„±

4. **Frontend UI êµ¬í˜„**
   - í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´
   - ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • í™”ë©´

5. **Jenkins íŒŒì´í”„ë¼ì¸ êµ¬í˜„**
   - ìë™ ìŠ¤ì¼€ì¼ì•„ì›ƒ íŒŒì´í”„ë¼ì¸
   - ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

6. **í†µí•© í…ŒìŠ¤íŠ¸**
   - ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
   - ì—ëŸ¬ ì²˜ë¦¬ ê²€ì¦

---

**ì‘ì„±ì**: Dana Cloud Automation Team  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-11-20

